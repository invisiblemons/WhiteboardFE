<div class=" content">
  <p-table id="table"
  [value]="reviewers"
  dataKey="name"
  responsiveLayout="scroll"
  [paginator]="true"
  [rows]="5"
  [showCurrentPageReport]="true"
  currentPageReportTemplate="Hiển thị từ {first} đến {last} của {totalRecords} mục"
  [rowsPerPageOptions]="[5, 10, 20]">
    <ng-template pTemplate="caption">
      <div class="d-flex bd-highlight">
        <div class="p-2 w-100 bd-highlight">
          <h2 class="p-m-0" style="font-weight: 500">Quản lý Reviewer</h2>
        </div>
      </div>

      <div class="row">
        <span class="mx-4">         
          <p-dropdown [options]="universities" [(ngModel)]="university" placeholder="Chọn truờng đại học"
            editable="true" optionLabel="name" (onChange)="onChangeUni($event)"></p-dropdown>
        </span>
      </div>
    </ng-template>

    <ng-template pTemplate="header">
      <tr>
        <th style="width: 5rem" class="text-center">Stt</th>
        <th class="text-center" style="width: 15rem">Ảnh đại diện</th>
        <th  class="text-center" pSortableColumn="name" style="width: 10rem">
          Tên<p-sortIcon field="name" class="text-center"></p-sortIcon>
        </th>
        
        <th  class="text-center" style="text-align: center; width: 15rem">
          Email
        </th>
        <th pSortableColumn="status" style="text-align: center; width: 9rem">
          Trạng thái<p-sortIcon field="status"></p-sortIcon>
          <p-dropdown [options]="listStatus" [(ngModel)]="selectedStatus" placeholder="Status" editable="true" 
           (onChange)="datatable.filter($event.value, 'status', 'equals')">
             <ng-template let-option pTemplate="reviewer">
              <span [class]="'customer-badge status-' + option.value">{{option.label}}</span>
             </ng-template>
          </p-dropdown>
        </th>
        <th style="width: 10rem;" class="text-center">Xem chi tiết</th>
        <th class="text-center">Khóa</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-reviewer let-expanded="expanded" let-rowIndex="rowIndex">
      <tr>
        <td style="text-align: center">{{rowIndex+1}}</td>
        <td style="text-align: center">
          <img [src]="reviewer.avatar" [alt]="reviewer.name" width="75" class="p-shadow-4 rounded mx-auto d-block" />
        </td>
        <td>{{ reviewer.name }}</td>
        <td style="text-align: center">
          {{ reviewer.email }}
        </td>
        <td style="text-align: center" *ngIf="reviewer.status ==='Unverified'">
          Chưa xác thực
        </td>
        <td style="text-align: center" *ngIf="reviewer.status==='Verified'">
          Xác thực
        </td>
        <td style="text-align: center" *ngIf="reviewer.status==='Locked'">
          Khoá
        </td>
        <td style="text-align: center" *ngIf="reviewer.status === 'Locked'">
          <button type="button" (click)="openDetailReviewer(reviewer)" pButton pRipple 
            class="p-button-text p-button-rounded p-button-plain" disabled
            [icon]="expanded ? 'pi pi-eye-slash' : 'pi pi-eye'"></button>
        </td>
        <td style="text-align: center" *ngIf="reviewer.status !== 'Locked'">
          <button type="button" (click)="openDetailReviewer(reviewer)" pButton pRipple 
            class="p-button-text p-button-rounded p-button-plain" 
            [icon]="expanded ? 'pi pi-eye-slash' : 'pi pi-eye'"></button>
        </td>
        <td style="text-align: center" *ngIf="reviewer.status ==='Verified'">
          <button pButton pRipple icon="pi pi-lock" class="p-button-rounded p-button-danger"
            (click)="deleteReviewer(reviewer)"></button>
        </td>
          <td style="text-align: center" *ngIf="reviewer.status === 'Locked'">
            <button pButton pRipple icon="pi pi-unlock" class="p-button-rounded p-button-success"
              (click)="unDeleteReviewer(reviewer)"></button>
          </td>
          <td style="text-align: center" *ngIf="reviewer.status ==='Unverified'">
          </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="4"></td>
        <td colspan="2">
          <p-progressSpinner [style]="{width: '50px', height: '50px'}" styleClass="custom-spinner" strokeWidth="8"
            fill="#EEEEEE" animationDuration=".5s"></p-progressSpinner>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3"></td>
        <td colspan="4" *ngIf="isShowSpin">
          <p-progressSpinner
            [style]="{ width: '50px', height: '50px' }"
            styleClass="custom-spinner"
            strokeWidth="8"
            fill="#EEEEEE"
            animationDuration=".5s"
          ></p-progressSpinner>
        </td>
        <td colspan="4" *ngIf="!isShowSpin">Không có Reviewer.</td>
      </tr>
    </ng-template>
  </p-table>
  <p-confirmDialog></p-confirmDialog>
  <p-toast position="top-right"></p-toast>
  <router-outlet></router-outlet>
</div>